/*********************************************
 * OYL 12.5 Model
 * AXthor: viann
 * Creation Date: 10 mars 2018 at 15:24:09
 *********************************************/
 
 /*
	  Environnement 1:
	    Agents:
	      A, B
	    Règles:
	      A+ ==> B+
	      A+ ==> A-
	      
	  Environnement 2:
	    Agents:
	      C, D
	    Règles:
	      C- ==> D+
	      D- ==> D+
*/
	
 
 
dvar boolean a1;
dvar boolean b1;
dvar boolean a2;
dvar boolean b2;
dvar boolean a3;
dvar boolean b3;
dvar boolean a4;
dvar boolean b4;


dvar boolean X[0..3][0..3];
dvar boolean Y[0..1][0..1];
dvar int S;
maximize S;

subject to{
  //Lignes agents
  X[0][0] + X[0][1] + X[0][2] + X[0][3] == 1;
  X[1][0] + X[1][1] + X[1][2] + X[0][3] == 1;
  X[2][0] + X[2][1] + X[2][2] + X[2][3] == 1;
  X[3][0] + X[3][1] + X[3][2] + X[3][3] == 1; 
  
  //Colonnes agents
  X[0][0] + X[1][0] + X[2][0] + X[3][0] == 1;
  X[0][1] + X[1][1] + X[2][1] + X[3][1] == 1;
  X[0][2] + X[1][2] + X[2][2] + X[3][2] == 1;
  X[0][3] + X[1][3] + X[2][3] + X[3][3] == 1;
  
  //Egalitée des croix agents
  X[0][0] == X[1][1];
  X[0][1] == X[1][0];
  X[0][2] == X[1][3];
  X[0][3] == X[1][2];
  X[2][0] == X[3][1];
  X[2][1] == X[3][0];
  X[2][2] == X[3][3];
  X[2][3] == X[3][2];
  
  
  //Lignes règles	
  Y[0][0] + Y[0][1] == 1;
  Y[1][0] + Y[1][1] == 1;
  
  //Colonnes règles
  Y[0][0] + Y[1][0] == 1;
  Y[0][1] + Y[1][1] == 1;
  
  //Nonlinear constraint
  
  
  //Fonction d'évaluation
  a1 <= Y[0][0];	a1 <= X[1][0];	a1 >= Y[0][0] + X[1][0] - 1;
  b1 <= Y[0][0];	b1 <= X[2][2];	b1 >= Y[0][0] + X[2][2] - 1;
  
  a2 <= Y[0][1];	a2 <= X[1][0];	a2 >= Y[0][1] + X[1][0] - 1;
  b2 <= Y[0][1];	b2 <= X[2][1];	b2 >= Y[0][1] + X[2][1] - 1;
  
  a3 <= Y[1][0];	a3 <= X[3][0];	a3 >= Y[1][0] + X[3][0] - 1;
  b3 <= Y[1][0];	b3 <= X[2][2];	b3 >= Y[1][0] + X[2][2] - 1;
  
  a4 <= Y[1][1];	a4 <= X[3][0];	a4 >= Y[1][1] + X[3][0] - 1;
  b4 <= Y[1][1];	b4 <= X[2][1];	b4 >= Y[1][1] + X[2][1] - 1;
  
  
  S == 2*a1 + 2*b1 - 2*Y[0][0]
  	 + 2*a2 + 2*b2 - 2*Y[0][1]
  	 + 2*a3 + 2*b3 - 2*Y[1][0]
  	 + 2*a4 + 2*b4 - 2*Y[1][1];
  
  
  
  /*Y[0][0] * (2*X[1][0] - 1 + 2*X[2][2] - 1)
  + Y[0][1] * (2*X[1][0] - 1 + 2*X[2][1] - 1)
  + Y[1][0] * (2*X[3][0] - 1 + 2*X[2][2] - 1)
  + Y[1][1] * (2*X[3][0] - 1 + 2*X[2][1] - 1);*/
}
