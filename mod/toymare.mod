dvar boolean X[0..7][0..9];
dvar boolean Y[0..3][0..0];
dvar boolean S0[0..5];
dvar boolean S1[0..8];
dvar boolean S2[0..5];
dvar boolean S3[0..5];
dvar int S;
maximize S;

subject to{
	//Lignes agents
	X[0][0] + X[0][1] + X[0][2] + X[0][3] + X[0][4] + X[0][5] + X[0][6] + X[0][7] + X[0][8] + X[0][9] <= 1;
	X[1][0] + X[1][1] + X[1][2] + X[1][3] + X[1][4] + X[1][5] + X[1][6] + X[1][7] + X[1][8] + X[1][9] <= 1;
	X[2][0] + X[2][1] + X[2][2] + X[2][3] + X[2][4] + X[2][5] + X[2][6] + X[2][7] + X[2][8] + X[2][9] <= 1;
	X[3][0] + X[3][1] + X[3][2] + X[3][3] + X[3][4] + X[3][5] + X[3][6] + X[3][7] + X[3][8] + X[3][9] <= 1;
	X[4][0] + X[4][1] + X[4][2] + X[4][3] + X[4][4] + X[4][5] + X[4][6] + X[4][7] + X[4][8] + X[4][9] <= 1;
	X[5][0] + X[5][1] + X[5][2] + X[5][3] + X[5][4] + X[5][5] + X[5][6] + X[5][7] + X[5][8] + X[5][9] <= 1;
	X[6][0] + X[6][1] + X[6][2] + X[6][3] + X[6][4] + X[6][5] + X[6][6] + X[6][7] + X[6][8] + X[6][9] <= 1;
	X[7][0] + X[7][1] + X[7][2] + X[7][3] + X[7][4] + X[7][5] + X[7][6] + X[7][7] + X[7][8] + X[7][9] <= 1;

	//Colonnes agents
	X[0][0] + X[1][0] + X[2][0] + X[3][0] + X[4][0] + X[5][0] + X[6][0] + X[7][0] <= 1;
	X[0][1] + X[1][1] + X[2][1] + X[3][1] + X[4][1] + X[5][1] + X[6][1] + X[7][1] <= 1;
	X[0][2] + X[1][2] + X[2][2] + X[3][2] + X[4][2] + X[5][2] + X[6][2] + X[7][2] <= 1;
	X[0][3] + X[1][3] + X[2][3] + X[3][3] + X[4][3] + X[5][3] + X[6][3] + X[7][3] <= 1;
	X[0][4] + X[1][4] + X[2][4] + X[3][4] + X[4][4] + X[5][4] + X[6][4] + X[7][4] <= 1;
	X[0][5] + X[1][5] + X[2][5] + X[3][5] + X[4][5] + X[5][5] + X[6][5] + X[7][5] <= 1;
	X[0][6] + X[1][6] + X[2][6] + X[3][6] + X[4][6] + X[5][6] + X[6][6] + X[7][6] <= 1;
	X[0][7] + X[1][7] + X[2][7] + X[3][7] + X[4][7] + X[5][7] + X[6][7] + X[7][7] <= 1;
	X[0][8] + X[1][8] + X[2][8] + X[3][8] + X[4][8] + X[5][8] + X[6][8] + X[7][8] <= 1;
	X[0][9] + X[1][9] + X[2][9] + X[3][9] + X[4][9] + X[5][9] + X[6][9] + X[7][9] <= 1;

	//Egalite des croix agents
	X[0][0] == X[1][1];
	X[0][1] == X[1][0];
	X[0][2] == X[1][3];
	X[0][3] == X[1][2];
	X[0][4] == X[1][5];
	X[0][5] == X[1][4];
	X[0][6] == X[1][7];
	X[0][7] == X[1][6];
	X[0][8] == X[1][9];
	X[0][9] == X[1][8];

	X[2][0] == X[3][1];
	X[2][1] == X[3][0];
	X[2][2] == X[3][3];
	X[2][3] == X[3][2];
	X[2][4] == X[3][5];
	X[2][5] == X[3][4];
	X[2][6] == X[3][7];
	X[2][7] == X[3][6];
	X[2][8] == X[3][9];
	X[2][9] == X[3][8];

	X[4][0] == X[5][1];
	X[4][1] == X[5][0];
	X[4][2] == X[5][3];
	X[4][3] == X[5][2];
	X[4][4] == X[5][5];
	X[4][5] == X[5][4];
	X[4][6] == X[5][7];
	X[4][7] == X[5][6];
	X[4][8] == X[5][9];
	X[4][9] == X[5][8];

	X[6][0] == X[7][1];
	X[6][1] == X[7][0];
	X[6][2] == X[7][3];
	X[6][3] == X[7][2];
	X[6][4] == X[7][5];
	X[6][5] == X[7][4];
	X[6][6] == X[7][7];
	X[6][7] == X[7][6];
	X[6][8] == X[7][9];
	X[6][9] == X[7][8];

	//Lignes regles
	Y[0][0] <= 1;
	Y[1][0] <= 1;
	Y[2][0] <= 1;
	Y[3][0] <= 1;

	//Colonnes regles
	Y[0][0] + Y[1][0] + Y[2][0] + Y[3][0] <= 1;

	//Fonction d'evaluation
	S0[0] <= Y[0][0];	S0[0] <= X[0][0];	S0[0] >= Y[0][0] + X[0][0] - 1;
	S0[1] <= Y[0][0];	S0[1] <= X[0][2];	S0[1] >= Y[0][0] + X[0][2] - 1;
	S0[2] <= Y[0][0];	S0[2] <= X[0][4];	S0[2] >= Y[0][0] + X[0][4] - 1;
	S0[3] <= Y[0][0];	S0[3] <= X[3][0];	S0[3] >= Y[0][0] + X[3][0] - 1;
	S0[4] <= Y[0][0];	S0[4] <= X[3][3];	S0[4] >= Y[0][0] + X[3][3] - 1;
	S0[5] <= Y[0][0];	S0[5] <= X[3][7];	S0[5] >= Y[0][0] + X[3][7] - 1;

	S1[0] <= Y[1][0];	S1[0] <= X[2][0];	S1[0] >= Y[1][0] + X[2][0] - 1;
	S1[1] <= Y[1][0];	S1[1] <= X[2][2];	S1[1] >= Y[1][0] + X[2][2] - 1;
	S1[2] <= Y[1][0];	S1[2] <= X[2][4];	S1[2] >= Y[1][0] + X[2][4] - 1;
	S1[3] <= Y[1][0];	S1[3] <= X[4][0];	S1[3] >= Y[1][0] + X[4][0] - 1;
	S1[4] <= Y[1][0];	S1[4] <= X[4][3];	S1[4] >= Y[1][0] + X[4][3] - 1;
	S1[5] <= Y[1][0];	S1[5] <= X[4][7];	S1[5] >= Y[1][0] + X[4][7] - 1;
	S1[6] <= Y[1][0];	S1[6] <= X[6][0];	S1[6] >= Y[1][0] + X[6][0] - 1;
	S1[7] <= Y[1][0];	S1[7] <= X[6][3];	S1[7] >= Y[1][0] + X[6][3] - 1;
	S1[8] <= Y[1][0];	S1[8] <= X[6][7];	S1[8] >= Y[1][0] + X[6][7] - 1;

	S2[0] <= Y[2][0];	S2[0] <= X[4][0];	S2[0] >= Y[2][0] + X[4][0] - 1;
	S2[1] <= Y[2][0];	S2[1] <= X[4][2];	S2[1] >= Y[2][0] + X[4][2] - 1;
	S2[2] <= Y[2][0];	S2[2] <= X[4][4];	S2[2] >= Y[2][0] + X[4][4] - 1;
	S2[3] <= Y[2][0];	S2[3] <= X[7][0];	S2[3] >= Y[2][0] + X[7][0] - 1;
	S2[4] <= Y[2][0];	S2[4] <= X[7][3];	S2[4] >= Y[2][0] + X[7][3] - 1;
	S2[5] <= Y[2][0];	S2[5] <= X[7][7];	S2[5] >= Y[2][0] + X[7][7] - 1;

	S3[0] <= Y[3][0];	S3[0] <= X[7][0];	S3[0] >= Y[3][0] + X[7][0] - 1;
	S3[1] <= Y[3][0];	S3[1] <= X[7][2];	S3[1] >= Y[3][0] + X[7][2] - 1;
	S3[2] <= Y[3][0];	S3[2] <= X[7][4];	S3[2] >= Y[3][0] + X[7][4] - 1;
	S3[3] <= Y[3][0];	S3[3] <= X[5][0];	S3[3] >= Y[3][0] + X[5][0] - 1;
	S3[4] <= Y[3][0];	S3[4] <= X[5][3];	S3[4] >= Y[3][0] + X[5][3] - 1;
	S3[5] <= Y[3][0];	S3[5] <= X[5][7];	S3[5] >= Y[3][0] + X[5][7] - 1;

	S == 2*S0[0] + 2*S0[1] + 2*S0[2] + 2*S0[3] + 2*S0[4] + 2*S0[5] - 6 * Y[0][0]
	   + 2*S1[0] + 2*S1[1] + 2*S1[2] + 2*S1[3] + 2*S1[4] + 2*S1[5] + 2*S1[6] + 2*S1[7] + 2*S1[8] - 6 * Y[1][0]
	   + 2*S2[0] + 2*S2[1] + 2*S2[2] + 2*S2[3] + 2*S2[4] + 2*S2[5] - 6 * Y[2][0]
	   + 2*S3[0] + 2*S3[1] + 2*S3[2] + 2*S3[3] + 2*S3[4] + 2*S3[5] - 6 * Y[3][0]
	  ;
}
