dvar boolean X[0..3][0..5];
dvar boolean Y[0..1][0..1];
dvar boolean S0[0..2];
dvar boolean S1[0..1];
dvar boolean S2[0..4];
dvar boolean S3[0..2];
dvar int S;
maximize S;

subject to{
	//Lignes agents
	X[0][0] + X[0][1] + X[0][2] + X[0][3] + X[0][4] + X[0][5] <= 1;
	X[1][0] + X[1][1] + X[1][2] + X[1][3] + X[1][4] + X[1][5] <= 1;
	X[2][0] + X[2][1] + X[2][2] + X[2][3] + X[2][4] + X[2][5] <= 1;
	X[3][0] + X[3][1] + X[3][2] + X[3][3] + X[3][4] + X[3][5] <= 1;

	//Colonnes agents
	X[0][0] + X[1][0] + X[2][0] + X[3][0] <= 1;
	X[0][1] + X[1][1] + X[2][1] + X[3][1] <= 1;
	X[0][2] + X[1][2] + X[2][2] + X[3][2] <= 1;
	X[0][3] + X[1][3] + X[2][3] + X[3][3] <= 1;
	X[0][4] + X[1][4] + X[2][4] + X[3][4] <= 1;
	X[0][5] + X[1][5] + X[2][5] + X[3][5] <= 1;

	//Egalite des croix agents
	X[0][0] == X[1][1];
	X[0][1] == X[1][0];
	X[0][2] == X[1][3];
	X[0][3] == X[1][2];
	X[0][4] == X[1][5];
	X[0][5] == X[1][4];

	X[2][0] == X[3][1];
	X[2][1] == X[3][0];
	X[2][2] == X[3][3];
	X[2][3] == X[3][2];
	X[2][4] == X[3][5];
	X[2][5] == X[3][4];

	//Lignes regles
	Y[0][0] + Y[0][1] <= 1;
	Y[1][0] + Y[1][1] <= 1;

	//Colonnes regles
	Y[0][0] + Y[1][0] <= 1;
	Y[0][1] + Y[1][1] <= 1;

	//Fonction d'evaluation
	S0[0] <= Y[0][0];	S0[0] <= X[1][0];	S0[0] >= Y[0][0] + X[1][0] - 1;
	S0[1] <= Y[0][0];	S0[1] <= X[1][3];	S0[1] >= Y[0][0] + X[1][3] - 1;
	S0[2] <= Y[0][0];	S0[2] <= X[2][2];	S0[2] >= Y[0][0] + X[2][2] - 1;

	S1[0] <= Y[0][1];	S1[0] <= X[1][5];	S1[0] >= Y[0][1] + X[1][5] - 1;
	S1[1] <= Y[0][1];	S1[1] <= X[2][0];	S1[1] >= Y[0][1] + X[2][0] - 1;

	S2[0] <= Y[1][0];	S2[0] <= X[2][0];	S2[0] >= Y[1][0] + X[2][0] - 1;
	S2[1] <= Y[1][0];	S2[1] <= X[2][3];	S2[1] >= Y[1][0] + X[2][3] - 1;
	S2[2] <= Y[1][0];	S2[2] <= X[3][0];	S2[2] >= Y[1][0] + X[3][0] - 1;
	S2[3] <= Y[1][0];	S2[3] <= X[3][3];	S2[3] >= Y[1][0] + X[3][3] - 1;
	S2[4] <= Y[1][0];	S2[4] <= X[2][2];	S2[4] >= Y[1][0] + X[2][2] - 1;

	S3[0] <= Y[1][1];	S3[0] <= X[2][5];	S3[0] >= Y[1][1] + X[2][5] - 1;
	S3[1] <= Y[1][1];	S3[1] <= X[3][5];	S3[1] >= Y[1][1] + X[3][5] - 1;
	S3[2] <= Y[1][1];	S3[2] <= X[2][0];	S3[2] >= Y[1][1] + X[2][0] - 1;

	S == 2*S0[0] + 2*S0[1] + 2*S0[2] - 3 * Y[0][0]
	   + 2*S1[0] + 2*S1[1] - 2 * Y[0][1]
	   + 2*S2[0] + 2*S2[1] + 2*S2[2] + 2*S2[3] + 2*S2[4] - 3 * Y[1][0]
	   + 2*S3[0] + 2*S3[1] + 2*S3[2] - 3 * Y[1][1]
	  ;
}
